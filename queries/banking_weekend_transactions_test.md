# مستندات آزمون تراکنش‌های آخر هفته

## نام آزمون
**آزمون شناسایی تراکنش‌های بانکی در آخر هفته** (Weekend Transactions Test)

## هدف و کاربرد در حسابرسی

### چرا از این آزمون استفاده می‌کنیم؟
تراکنش‌های بانکی در روزهای تعطیل (جمعه و شنبه) غیرعادی هستند چون:
- **بانک‌ها تعطیل هستند:** معمولاً تراکنش‌های عادی در این روزها انجام نمی‌شود
- **دسترسی محدود:** کمتر کسی در بانک است
- **کنترل کمتر:** نظارت کمتری وجود دارد
- **احتمال تقلب:** مرتکبان ممکن است از این موقعیت سوءاستفاده کنند

**در حسابرسی از این آزمون برای:**
- **شناسایی تراکنش‌های غیرعادی:** یافتن فعالیت‌های مشکوک در تعطیلات
- **کشف تقلب:** تراکنش‌های مشکوک اغلب در زمان‌های کم نظارت انجام می‌شوند
- **ارزیابی کنترل‌ها:** بررسی کنترل‌های دسترسی در تعطیلات
- **تایید مجوزها:** اطمینان از داشتن مجوز مناسب

### کاربردهای عملی:
- شناسایی تراکنش‌های خودکار در تعطیلات
- کشف دسترسی‌های غیرمجاز
- بررسی تراکنش‌های اضطراری
- کنترل فعالیت‌های غیرمعمول

## پارامترهای ورودی

این آزمون پارامتر ورودی ندارد و تمام تراکنش‌های جمعه و شنبه را نمایش می‌دهد.

## ستون‌های خروجی

### 1. TransactionID (شناسه تراکنش)
- شناسه منحصر به فرد تراکنش

### 2. TransactionDate (تاریخ تراکنش)
- تاریخ انجام تراکنش

### 3. DayOfWeek (روز هفته)
- نام روز هفته (جمعه یا شنبه)

### 4. Amount (مبلغ)
- مبلغ تراکنش

### 5. TransactionType (نوع تراکنش)
- نوع تراکنش (برداشت، واریز، انتقال، و غیره)

### 6. AccountNumber (شماره حساب)
- شماره حساب مربوطه

### 7. Description (شرح)
- شرح تراکنش

## نحوه انجام آزمون

### مراحل اجرا:

1. **دریافت داده‌ها:**
   - تمام تراکنش‌ها از پایگاه داده خوانده می‌شوند

2. **شناسایی روز هفته:**
   - برای هر تراکنش، روز هفته از تاریخ استخراج می‌شود
   - روزهای هفته: 0=دوشنبه، 1=سه‌شنبه، ..., 4=جمعه، 5=شنبه، 6=یکشنبه

3. **فیلتر کردن:**
   ```
   اگر روز هفته = 4 (جمعه) یا 5 (شنبه):
       تراکنش را در نتایج قرار بده
   ```

4. **مرتب‌سازی:**
   - نتایج بر اساس تاریخ (جدید به قدیم) مرتب می‌شوند

## تفسیر نتایج

### انواع تراکنش‌های آخر هفته:

#### تراکنش‌های خودکار - طبیعی
- **ویژگی‌ها:**
  - تراکنش‌های برنامه‌ریزی شده (کارمزد، بهره، و غیره)
  - مبالغ کوچک و ثابت
  - تکرار منظم
- **سطح ریسک:** پایین
- **اقدام:** بررسی عادی

#### تراکنش‌های دستی - مشکوک
- **ویژگی‌ها:**
  - تراکنش‌های غیرخودکار
  - نیاز به دسترسی انسانی
  - مبالغ متغیر
- **سطح ریسک:** بالا
- **اقدام:** بررسی دقیق و تایید مجوز

#### تراکنش‌های بزرگ - بسیار مشکوک
- **ویژگی‌ها:**
  - مبالغ بالا
  - در تعطیلات
  - بدون توضیح واضح
- **سطح ریسک:** بسیار بالا
- **اقدام:** تحقیق فوری

### علائم خطر (Red Flags):

1. **تراکنش بزرگ در تعطیلات:**
   - مبلغ بالا + جمعه/شنبه
   - بسیار مشکوک

2. **فقدان شرح یا شرح مبهم:**
   - تراکنش در تعطیلات بدون توضیح
   - احتمال تقلب

3. **تراکنش‌های متعدد از یک حساب:**
   - چند تراکنش آخر هفته از یک حساب
   - الگوی مشکوک

4. **عدم تطابق با الگوی عادی:**
   - تراکنش خارج از روتین معمول
   - نیاز به بررسی

## مثال عملی

### سناریو:
بررسی تراکنش‌های آخر هفته یک بانک در یک ماه

### نتیجه نمونه:
```
شناسه | تاریخ      | روز    | مبلغ        | نوع        | حساب   | شرح
T-001  | 2024-03-15 | جمعه   | 50,000,000  | برداشت     | 1001   | نامشخص
T-002  | 2024-03-16 | شنبه   | 1,500       | کارمزد     | 2002   | کارمزد ماهانه خودکار
T-003  | 2024-03-22 | جمعه   | 30,000,000  | انتقال     | 1003   | انتقال به حساب 2005
T-004  | 2024-03-29 | جمعه   | 80,000,000  | واریز      | 1001   |
```

### تحلیل:

1. **T-001 (جمعه، 50M، بدون شرح):**
   - برداشت بزرگ در جمعه
   - شرح نامشخص ✗
   - **بسیار مشکوک:**
     - چه کسی این برداشت را کرده؟
     - با چه مجوزی؟
     - برای چه منظوری؟

2. **T-002 (شنبه، کارمزد خودکار):**
   - کارمزد ماهانه
   - خودکار و برنامه‌ریزی شده
   - **طبیعی**

3. **T-003 (جمعه، 30M، انتقال):**
   - انتقال قابل توجه
   - شرح دارد
   - **بررسی:**
     - آیا این انتقال مجاز بوده؟
     - چه کسی انجام داده؟

4. **T-004 (جمعه، 80M، بدون شرح):**
   - واریز بسیار بزرگ
   - بدون شرح ✗
   - **بسیار مشکوک:**
     - منبع وجه کجاست؟
     - چرا در جمعه؟

### اقدامات تحقیقاتی:

**برای T-001 و T-004:**
1. بررسی لاگ‌های سیستم (چه کسی لاگین کرده)
2. تایید با مدیر شعبه
3. بررسی مجوزهای دسترسی
4. مطابقت با اسناد
5. در صورت لزوم، گزارش به مقامات

## نکات مهم

### محدودیت‌ها:
- ❌ تراکنش‌های خودکار طبیعی را هم نشان می‌دهد
- ❌ نمی‌تواند بین تراکنش‌های مجاز و غیرمجاز تمییز دهد
- ❌ در برخی بانک‌ها که شنبه کاری است کاربرد ندارد

### بهترین کاربردها:
- ✅ شناسایی فعالیت‌های غیرعادی
- ✅ بررسی کنترل دسترسی
- ✅ کشف تقلب کارکنان
- ✅ ارزیابی کنترل‌های داخلی

### توصیه‌ها:
1. **تفکیک خودکار و دستی:**
   - تراکنش‌های خودکار را جدا کنید
   - فقط تراکنش‌های دستی را بررسی کنید

2. **تعیین آستانه مبلغ:**
   - تراکنش‌های بزرگ را اولویت‌بندی کنید

3. **بررسی مجوزها:**
   - تایید کنید چه کسانی مجوز دسترسی در تعطیلات دارند

4. **ترکیب با آزمون‌های دیگر:**
   - آزمون تراکنش‌های مشکوک
   - آزمون دسترسی‌های غیرمجاز

### اقدامات پیشگیرانه:
- **کنترل دسترسی:**
  - محدود کردن دسترسی در تعطیلات
  - تایید دوسطحی برای تراکنش‌های بزرگ
  - لاگ‌گیری دقیق

- **خط‌مشی واضح:**
  - تعریف تراکنش‌های مجاز در تعطیلات
  - تایین افراد مجاز
  - ثبت دلایل تراکنش‌های اضطراری

- **پایش مستمر:**
  - هشدار خودکار برای تراکنش‌های آخر هفته
  - بررسی فوری تراکنش‌های بزرگ

## ارتباط با سایر آزمون‌ها

- **آزمون ثبت‌های دستی:** تراکنش‌های دستی در تعطیلات مشکوک‌تر هستند
- **آزمون تفکیک وظایف:** بررسی چه کسی در تعطیلات دسترسی دارد
- **آزمون لاگ سیستم:** تطبیق با لاگ‌های ورود به سیستم

## نمونه خط‌مشی تراکنش‌های آخر هفته

### تراکنش‌های مجاز:
- کارمزدهای خودکار
- پرداخت بهره خودکار
- تراکنش‌های زمان‌بندی شده

### تراکنش‌های نیازمند تایید ویژه:
- برداشت‌های بالای 10 میلیون
- انتقالات بین‌المللی
- تغییر اطلاعات حساب

### تراکنش‌های ممنوع:
- ایجاد حساب جدید
- حذف تراکنش‌ها
- تغییرات گسترده
